# Test macro for pattern exposure simulation
# This demonstrates square pattern exposure with JEOL parameters

# Verbose settings
/run/verbose 1
/event/verbose 0
/tracking/verbose 0

# Initialize
/run/initialize

# Set resist properties (Alucone)
/det/setResistComposition "Al:1,C:5,H:4,O:2"
/det/setResistThickness 30 nm
/det/setResistDensity 1.35 g/cm3
/det/update

# Enable physics processes
/process/em/fluo 1
/process/em/auger 1

# Enable pattern mode
/pattern/enable true
/pattern/type square
/pattern/jeolMode mode3
/pattern/shotPitch 4
/pattern/size 1000 nm
/pattern/center 0 0 0 nm
/pattern/beamCurrent 2.0 nA
/pattern/dose 300
/pattern/generate

# Beam configuration
/gun/particle e-
/gun/energy 100 keV
/gun/beamSize 2 nm

# Initialize dose grid - 2 um x 2 um x 30 nm with 200x200x20 cells
/data/initDoseGrid 200 200 20 -1000 1000 -1000 1000 0 30 nm

# Run simulation
# Note: For pattern exposure, number of events = number of pattern points × electrons per point
# For a 1μm × 1μm square with 4nm shot pitch: 250×250 = 62,500 points
# With typical dwell time, this might be ~1000 electrons/point
# Total events needed: ~62,500,000 (adjust based on actual calculation)
/run/beamOn 1000000